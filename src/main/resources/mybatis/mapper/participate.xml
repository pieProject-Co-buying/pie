<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pie.pieProject.DAO.IParticipateCheckDao">
	<insert id="participateShare">
		insert into checkParticipate values(#{param1},
		#{param2}, #{param3},sysdate,'1','0')
	</insert>
	<insert id="participate">
		insert into checkParticipate values(#{param1},
		#{param2}, #{param3},sysdate,'1','1')
	</insert>
	<select id="getTownboard"
		resultType="com.pie.pieProject.DTO.TownBuyBoardDto">
		SELECT *
		FROM townBuyBoard
		JOIN checkParticipate ON
		checkParticipate.boardNum
		= townBuyBoard.to_num
		WHERE
		checkParticipate.writer = #{param1} order
		by townBuyBoard.to_num desc
	</select>
	<select id="getDate" resultType="string">
		select partiDate from
		checkParticipate where writer = 'pie1111' and
		tableName =
		'townBuyBoard' order by boardNum desc
	</select>
	<select id="getPartiMem" resultType="com.pie.pieProject.DTO.MemberDto">
		SELECT *
		FROM member_user
		JOIN checkParticipate ON
		checkParticipate.mem
		= member_user.id
		WHERE checkParticipate.boardNum =
		#{param1} and checkParticipate.tableName=#{param2}
	</select>
	<select id="getPartiMemNum" resultType="int">
	SELECT count(*)
		FROM member_user
		JOIN checkParticipate ON
		checkParticipate.mem
		= member_user.id
		WHERE checkParticipate.boardNum =
		#{param1} and checkParticipate.tableName=#{param2}
	</select>
</mapper>