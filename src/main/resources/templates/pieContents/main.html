<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<div th:fragment="mainPageCarousel">
	<div id="headerCarousel" class="carousel slide overflow-hidden"
		data-ride="carousel">
		<div class="carousel-inner">
			<div class="carousel-item hyej-h100vh active"></div>
			<div class="carousel-item hyej-h100vh"></div>
			<div class="carousel-item hyej-h100vh"></div>
		</div>
		<button class="carousel-control-prev" type="button"
			data-target="#headerCarousel" data-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span> <span
				class="sr-only">Previous</span>
		</button>
		<button class="carousel-control-next" type="button"
			data-target="#headerCarousel" data-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span> <span
				class="sr-only">Next</span>
		</button>
	</div>
</div>


<!-- main fragment -->
<div th:fragment="mainPageContents">
	<!-- ###############################################
secion1 #sec1 - 우리동네 공동구매 영역
############################################### -->
	<section class="pie-section-py">
		<div class="container">
			<div class="row">
				<div class="col">
					<div
						class="d-flex align-items-center justify-content-between w-100">
						<h1 class="mb-5 mt-5 text-center text-sm-left">대리공구(가제)</h1>
						<a class="btn border"> <small>더보기</small>
						</a>
					</div>

					<div class="card-columns">
						<div class="card">
							<img src="imgs/img1.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title that wraps to a new line</h5>
								<p class="card-text">This is a longer card with supporting
									text below as a natural lead-in to additional content. This
									content is a little bit longer.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
						<div class="card">
							<img src="imgs/img2.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title</h5>
								<p class="card-text">This card has supporting text below as
									a natural lead-in to additional content.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
						<div class="card">
							<img src="imgs/img3.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title</h5>
								<p class="card-text">This card has supporting text below as
									a natural lead-in to additional content.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
						<div class="card">
							<img src="imgs/img4.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title</h5>
								<p class="card-text">This card has supporting text below as
									a natural lead-in to additional content.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
						<div class="card">
							<img src="imgs/img5.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title</h5>
								<p class="card-text">This card has supporting text below as
									a natural lead-in to additional content.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
						<div class="card">
							<img src="imgs/img6.jpg" class="card-img-top" alt="...">
							<div class="card-body">
								<h5 class="card-title">Card title</h5>
								<p class="card-text">This card has supporting text below as
									a natural lead-in to additional content.</p>
								<p class="card-text">
									<small class="text-muted">Last updated 3 mins ago</small>
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</section>


	<!-- ###############################################
secion2 #sec2 - 대리공구 영역
############################################### -->


	<section id="sec2" class="pie-bg-lightgray pie-section-py">

		<div class="container ">

			<div class="d-flex align-items-center justify-content-between w-100">
				<h1 class="mb-5 mt-5 text-center text-sm-left">대리공구(가제)</h1>
				<a class="btn border" href="proxyBuyProducts"> <small>더보기</small>
				</a>
			</div>
			<th:block th:if="${list==null||list.size()==0}">
				<div class="row">
					<div class="col">
						<hr class="my-5" />
						<p class="lead py-5">
						현재 작성된 글이 없습니다.
						</p>
						<hr class="my-5" />
					</div>
				</div>
			</th:block>


			<th:block th:if="${list!=null && list.size()!=0}">
				<div class="row hyej-best-gallery">
					<div class="col-md-6 mb-3 mb-md-2">
						<div class="container-fluid hyej-customCard pt-1 bg-white">
							<div class="row">
								<div
									class="col-12 border-bottom px-4 py-3 d-flex align-items-center">
									<img th:src="@{'imgs/profiles/'+${list[0].getPr_profileImg()}}"
										class=" border rounded-circle pie-profilePic-mid align-self-center"
										id="bestProfileImg" alt=>
									<div class="pl-3 pie-view-text pie-omitted d-flex flex-column">
										<small class="m-0 font-weight-bold"
											th:text="${list[0].getPr_nickname()}" id="bestNickName">아이디</small>
										<small class="pie-introduceself w-100 pie-omitted">자기
											소개글 엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글
											엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글 엄청길게 쓰기자기 소개글 엄청길게
											쓰기 </small>
									</div>
									<div class="pl-3">
										<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
											fill="currentColor" class="bi bi-hand-thumbs-up"
											viewBox="0 0 16 16">
							<path
												d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2 2 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a10 10 0 0 0-.443.05 9.4 9.4 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a9 9 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.2 2.2 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.9.9 0 0 1-.121.416c-.165.288-.503.56-1.066.56z" />
						</svg>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col p-0">
									<div id="proxyMainCarousel" class="carousel slide"
										data-ride="carousel">
										<ol class="carousel-indicators">
											<th:block
												th:each="i : ${#numbers.sequence(0,list[0].getPr_productImgs().length-1)}">
												<li data-target="#proxyMainCarousel"
													th:attr="data-slide-to=${i}"></li>
											</th:block>
										</ol>
										<div class="carousel-inner">
											<th:block th:each="img : ${list[0].getPr_productImgs()}">
												<div class="carousel-item">
													<img th:src="@{'imgs/test/'+${img}}" class="d-block w-100"
														alt="...">
												</div>
											</th:block>

										</div>
										<button class="carousel-control-prev" type="button"
											data-target="#proxyMainCarousel" data-slide="prev">
											<span class="carousel-control-prev-icon" aria-hidden="true"></span>
											<span class="sr-only">Previous</span>
										</button>
										<button class="carousel-control-next" type="button"
											data-target="#proxyMainCarousel" data-slide="next">
											<span class="carousel-control-next-icon" aria-hidden="true"></span>
											<span class="sr-only">Next</span>
										</button>
									</div>
								</div>
							</div>
							<div class="row p-3 pt-4">
								<div class="col">
									<h4 id="bestTitle" th:text="${list[0].getPr_title()}"></h4>
									<div id="bestContent" th:utext="${list[0].getPr_content()}"></div>
								</div>
							</div>
							<div class="row py-4">
								<div class="col">
									<a th:href="@{'viewProxyBoard?num='+${list[0].getPr_num()}}"
										class="btn btn-outline-primary btn-block" id="bestBtn">보러가기</a>
								</div>
							</div>

						</div>
					</div>
					<div class="col-md-6 pl-md-0">
						<div class="row no-gutters justify-content-center bests">
							<th:block th:each="board : ${list}">
								<div class="col-md-12 col-2 mx-1 mx-md-0 mb-2 bestProduct">
									<img
										th:src="@{'/imgs/test/' + ${board.getPr_productImg().substring(0,board.getPr_productImg().indexOf('/'))}}"
										alt="" />
								</div>
							</th:block>
						</div>
					</div>
				</div>
			</th:block>
		</div>
	</section>


	<section class="pie-section-py overflow-hidden">

		<div class="container">
			<div class="row">
				<div class="col">
					<h1 class="mb-5 mt-5 text-center text-sm-left">서비스 공유</h1>
				</div>
			</div>
		</div>

		<div class="row position-relative hyej-carousel-custom pb-5 mb-5">
			<div class="col pb-5 mb-5">
				<div class="owl-carousel owl-theme">
					<div class="item">
						<h4>
							<img src="imgs/netflix2.png" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/watcha.jpg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/xbox.jpg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/ridibooks.jpg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/youtube.webp" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4 class="">
							<img src="imgs/disney.png" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/steam.jpg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/spotify.jpg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/nintendoOnline.jpeg" alt="" class="img-fluid">
						</h4>
					</div>
					<div class="item">
						<h4>
							<img src="imgs/milli.jpg" alt="" class="img-fluid">
						</h4>
					</div>
				</div>
			</div>
		</div>

	</section>


	<script type="text/javascript" th:inline="javascript">
		var list = /*[[${list}]]*/[];
		console.log(list);
	</script>
	<script>
		$(function() {
			$("#proxyMainCarousel").find(".carousel-item").eq(0).addClass(
					"active");
			$("#proxyMainCarousel").find("li").eq(0).addClass("active");

			$(".bests")
					.find(".bestProduct")
					.click(
							function() {
								let idx = $(this).index();
								$("#bestProfileImg").attr(
										"src",
										'imgs/profiles/'
												+ list[idx].pr_profileImg);
								$("#bestNickName").text(list[idx].pr_nickname);
								$("#bestTitle").text(list[idx].pr_title);
								$("#bestContent").html(list[idx].pr_content);
								$("#bestBtn").attr(
										"href",
										'viewProxyBoard?num='
												+ list[idx].pr_num);
								$("#proxyMainCarousel").find(
										".carousel-indicators").empty();
								for (i = 0; i < list[idx].pr_productImgs.length; i++) {
									$("#proxyMainCarousel")
											.find(".carousel-indicators")
											.append(
													'<li data-target="#proxyMainCarousel" data-slide-to="'+i+'"></li>');
								}
								$("#proxyMainCarousel").find("li").eq(0)
										.addClass("active");
								$("#proxyMainCarousel").find(".carousel-inner")
										.empty();
								for (i = 0; i < list[idx].pr_productImgs.length; i++) {
									$("#proxyMainCarousel")
											.find(".carousel-inner")
											.append(
													'<div class="carousel-item"><img src="imgs/test/'+list[idx].pr_productImgs[i]+'" class="d-block w-100" alt="..."></div>');
								}
								$("#proxyMainCarousel").find(".carousel-item")
										.eq(0).addClass("active");
							})
		})
	</script>


</div>

</html>