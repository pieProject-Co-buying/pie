<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/shareService}">

<!--<h1>Bootstrap 기본설정완료</h1>-->
<div layout:fragment="shareServiceContent">
	<!--container-->
	<!--------------------------------게시글 로직-------------------------------->
	<div class="container">
		<div class="row mb-3">
			<div class="col text-center">
				<h1>나의 쉐어메이트를 찾아보세요!</h1>
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="col pie-tab-box">
				<ul class="list-unstyled d-flex justify-content-between">
					<li>#전체</li>
					<li>#OTT서비스</li>
					<li>#게임</li>
					<li>#도서/음악</li>
				</ul>
			</div>
			<!--col-->
		</div>
		<div class="row mb-5 justify-content-center">
			<div class="col-md-8">
				<form action="" class="pie-search">
					<input type="hidden" />
					<div class="dropdown" id="selectCategory">
						<a class="btn dropdown-toggle" href="#" role="button" data-toggle="dropdown"
							aria-expanded="false"> 카테고리 </a>
						<div class="dropdown-menu"></div>
					</div>
					<input type="text" name="search" id="search" class="flex-fill">
					<button class=""></button>
				</form>
			</div>
			<!--col-->
		</div>
		<!--row-->
		<div class="row category jh-cards">
			<!--col-4-->
			<div th:each="board:${list}" class="col-md-4 col-sm-12 movie" style="cursor:pointer">
				<a th:href="'boardList?sh_numID='+${board.getSh_numID()}" class="card" style="cursor:pointer">
					<img src="imgs/netflix.png" class="card-img-top img-fluid" alt="..." height="300px">
					<div class="card-body">
						<h5 class="card-title" th:text="${board.getSh_title()}"></h5> 
						<p class="card-text">
							<small><span class="badge badge-light">#태그1</span><span
									class="badge badge-light">>#태그2</span><span
									class="badge badge-light">#태그3</span></small>
						</p>
						<small class="pie-writer"><img src="" alt=""
								onerror="this.onerror=null; this.src='imgs/default.png';" />
								<span th:text="${board.getSh_nickname()}"></span>
						</small>
					</div>
				</a>
			</div>
			<!--col-4-->
		</div>
		<!--게시글 row-->
		<div class="container text-center mb-3 mt-5">
			<div class="row">
				<div class="col-12 btn btn-block border" id="load">
					<div class="">
						<span> 더보기 <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor"
								class="bi bi-caret-down-fill" viewBox="0 0 16 16">
								<path
									d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
							</svg>
					</div>
				</div>
			</div>
			<!--더보기 col-->
		</div>
		<!--더보기 row-->
	</div>
	<div class="container">
		<form action="writePost">
			<button class="btn custom-btn">글작성</button>
		</form>
	</div><!--container-->
	<!--wrapper-->

	<!--더보기 스크립트-->
	<script>
		$(function () {
			let categories = $(".tab-box ul li");
			let shaerHeader = $("#shareServiceTitle");
			let categorySel = $("#selectCategory");
			let dropdown = categorySel.find(".dropdown-menu");
			categories.css("cursor", "pointer");

			let movies = ["넷플릭스", "유튜브", "왓챠", "티빙", "디즈니 플러스"];
			let game = ["닌텐도", "스팀", "xBOX"];
			let books = ["리디북스", "스포티파이", "yes24", "밀리"];

			let all = [];

			all.push(...movies);
			all.push(...game);
			all.push(...books);

			for (i = 0; i < all.length; i++) {
				dropdown.append('<a class="dropdown-item">' + all[i] + '</a>')
			}


			let selectInit = $("#selectCategory .dropdown-toggle");



			let card = $(".col-md-4");
			let strCard = ".col-md-4:hidden";

			card.hide();
			card.slice(0, 6).show();


			categories.click(function () {
				let idx = $(this).index();
				let option = {};
				dropdown.empty();
				selectInit.text("카테고리");

				if (idx === 0) {
					option = {
						"background": "url(imgs/boong.jpg) center / cover no-repeat"
					};
					card = $(".col-md-4");
					strCard = ".col-md-4:hidden";

					card.hide();
					card.slice(0, 6).show();
					list = all;
				} else {
					$(".col-md-4").hide();

					if (idx === 1) {
						option = {
							"background": "url(imgs/netflix.png) center / cover no-repeat"
						};

						card = $(".movie");
						strCard = ".movie:hidden";

						card.slice(0, 6).show();

						selectInit.text("OTT서비스");
						list = movies;
					} else if (idx === 2) {
						option = {
							"background": "url(imgs/nintendoOnline.jpeg) center / cover no-repeat"
						};

						card = $(".game");
						strCard = ".game:hidden";

						card.slice(0, 6).show();

						selectInit.text("게임");
						list = game;
					} else if (idx === 3) {
						option = {
							"background": "url(imgs/milli.jpg) center / cover no-repeat"
						};

						card = $(".book");
						strCard = ".book:hidden";

						card.slice(0, 6).show();

						selectInit.text("도서/음악");
						list = books;
					}
				}
				shaerHeader.addClass("selected").css(option);

				for (i = 0; i < list.length; i++) {
					dropdown.append('<a class="dropdown-item">' + list[i] + '</a>')
				}
			});

			$(document).on(
				"click", ".dropdown-item", function () {
					selectInit.text($(this).text());
				}
			)

			$("#load").click(function (e) {
				e.preventDefault();
				if ($(strCard).length > 0) {
					$(strCard).slice(0, 3).show();
				} else if ($(strCard).length == 0) {
					alert("게시물의 끝입니다.");
				}
			});
		})
	</script>
	<!-- <script>
		function detailPage() {
			location.href = "shareServiceProduct";
		}
	</script> -->
</div>

</html>