<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pie.pieProject.DAO.IProxyApplyDao">

	<select id="listDaoByNewer"
		resultType="com.pie.pieProject.DTO.ProxyApplyBoardDto">
		select pie_member_user.nickname, pie_member_user.profile_pic, pie_proxyApplyBoard.*
from pie_member_user JOIN pie_proxyApplyBoard ON
		pie_proxyApplyBoard.id
		= pie_member_user.id order by registDay desc
	</select>
	
	<select id="listDaoByNewerAndId"
		resultType="com.pie.pieProject.DTO.ProxyApplyBoardDto">
		select pie_member_user.nickname, pie_member_user.profile_pic, pie_proxyApplyBoard.*
from pie_member_user JOIN pie_proxyApplyBoard ON
		pie_proxyApplyBoard.id
		= pie_member_user.id where pie_proxyApplyBoard.id = #{id} order by registDay desc
	</select>
	
	<select id="getView" resultType="com.pie.pieProject.DTO.ProxyApplyBoardDto">
		SELECT pie_member_user.nickname, pie_member_user.profile_pic, pie_proxyApplyBoard.*
from pie_member_user JOIN pie_proxyApplyBoard ON
		pie_proxyApplyBoard.id
		= pie_member_user.id where pie_proxyApplyBoard.num = #{param1}
	</select>
	<insert id="insertProxyBoard">
		insert into pie_proxyApplyBoard values(
		piebr_num.nextval,
		#{id},
		#{category},
		#{title},
		#{content},
		#{productImg},
		0,
		sysdate,
		sysdate,
		sysdate,
		#{ip},
		#{url},
		#{brand},
		#{productName}
		)
	</insert>
	<update id="updateProxyBoard">
		update pie_proxyApplyBoard set category=#{category}, title=#{title}, url=#{url},
		content=#{content}, productImg=#{productImg}, ip=#{ip}, updateDay=sysdate, brand=#{brand}, productName=#{productName} where num=#{num}
	</update>
	<delete id="deleteProxyBoard">
		delete pie_proxyApplyBoard where num = #{param1}
	</delete>
	<update id="updateState">
		update pie_proxyApplyBoard set process = #{process}, chkDay = sysdate where num= #{num}
	</update>
	<!-- 현재 인원 증가 -->
</mapper>